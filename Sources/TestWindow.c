/******************************************\|**| This_File.c\******************************************/#pragma mark ¥¥INCLUDES¥¥/******************************************\|**| #includes\******************************************/#pragma mark _system includes_/* - system*******************************************/#include <Appearance.h>#include <TextUtils.h>#include <string.h>#pragma mark _third party includes_/* - third party libraries*******************************************/#pragma mark _bp libraries includes_/* - bp libraries*******************************************/#include "Window Dispatch.h"#include "Control Utilities.h"#include "Hewey.h"#include "Hewey_Main.h"#include "Hewey_Layout.h"#include "str_bp.h"#include "Set Font By String.h"#include "FinderLike_LDEF.h"#include "IconSuiteFromAlias.h"#include "Navigation_Utilities.h"#include "BP_Error.h"#pragma mark _this library includes_/* - this project*******************************************/#include "TestWindow.h"#include "Finder_Dragging.h"#pragma mark ¥¥DEFINITIONS¥¥/******************************************\|**| #defines\******************************************//* - definitions*******************************************//*	kControlFontBigSystemFont	kControlFontSmallSystemFont	kControlFontSmallBoldSystemFont*/#define	kControlFont			GetFontNumByString("\pgeneva")//kControlFontBigSystemFont//1#define	kControlSize			9#define	kLargeControlSize		12#define	kGroupStyle				bold#define	kLabelResID				128#pragma mark _macros_/* - macros*******************************************/#pragma mark ¥¥TYPEDEFS¥¥/******************************************\|**| typedefs\******************************************/#pragma mark ¥¥EXTERNAL GLOBALS¥¥/******************************************\|**| external globals\******************************************/extern HFSFlavor		gHFSFlavor;				// data dragged in, re-used when dragging outextern Handle			gIconSuite;				// cached from flavorTypeHFS dragged inextern Boolean			gDragProcessed;#pragma mark ¥¥PRIVATE GLOBALS¥¥/******************************************\|**| private globals\******************************************/	huiMasterControlType		*master, *panelMaster;	short						currentPanel = 0;//	finderLikeLDEFDataType		alisListData;	#pragma mark ¥¥PRIVATE PROTOTYPES¥¥/******************************************\|**| private function prototypes\******************************************/static Boolean HandleEvent( EventRecord *, CWindowPtr, long, long);static Boolean ProcessEvent( EventRecord *theEvent,	CWindowPtr whichWindow, long dispatchID);StringPtr rstring( StringPtr s, short resid, short strnum);void FillFinderLikeLDEF( ControlHandle aControl);void AddLaunchItem( Handle iconSuite, StringPtr name);OSStatus GetDirNameFromFSSpec( FSSpecPtr dirSpec, StringPtr name);#pragma mark ¥¥PRIVATE FUNCTIONS¥¥/******************************************\|**| private functions\******************************************/static Boolean HandleEvent( EventRecord *theEvent,	CWindowPtr whichWindow, long dispatchID, long command){	switch( command)	{		case kWDCloseWindowCommand:			break;				case kWDProcessEventCommand:			return( ProcessEvent( theEvent, whichWindow, dispatchID));			break;				case kWDSaveWindowCommand:			return false;			break;	}	return false;}static Boolean ProcessEvent( EventRecord *theEvent,	CWindowPtr whichWindow, long dispatchID){//	Handle							data = GetDispatchWindowDataHandle( dispatchID);//	SignedByte						dataState;	Boolean							result = false;	ControlHandle					aControl, oldControl;	short							whichPart, oldValue;	WindowPtr						scratchWindow;	Point							where;	char							whichChar;	GrafPtr							oldPort;	OSStatus						err;	ListHandle						list;	//	if ( data == nil) return false;	if ( theEvent == nil) return false;	//	dataState = HGetState( data);//	HLock( data);	if ( theEvent == nil) goto ProcessEvent_Return;		GetPort( &oldPort);	SetPort( (WindowPtr)whichWindow);	switch( theEvent->what)	{		case nullEvent:			IdleControls( (WindowPtr)whichWindow);			if ( !gDragProcessed)			{				err = GetIconSuiteFromFSSpec( &gHFSFlavor.fileSpec, &gIconSuite);				if ( err != noErr)					BP_UserError_Literal(						"An error occured",						"CouldnÕt get the fileÕs icon because an error of type %d occured.",						err);				if ( gIconSuite == nil)					BP_UserError_Literal(						"An unexpected error occurred",						"The icon suite was unexpectedly nil.");				AddLaunchItem( gIconSuite, gHFSFlavor.fileSpec.name);				gDragProcessed = true;								gIconSuite = nil;			}						if ( (HMGetBalloons()) && (!(HMIsBalloon())))			{				huiGenericControlType	*aHuiControl = nil;				long					layer = 0, x = 0, y = 0;				HMMessageRecord			help;				Rect					alternateRect;				Boolean					helpFound = false;								do				{					aHuiControl = HUI_GenericControl_GetNext( master, &layer,						&x, &y, aHuiControl);										if ( aHuiControl != nil)					{						if ( aHuiControl->control != nil)						{							alternateRect = (**(aHuiControl->control)).contrlRect;											LocalToGlobal( (Point *)&alternateRect.top);							LocalToGlobal( (Point *)&alternateRect.bottom);							if ( PtInRect( theEvent->where, &alternateRect))								helpFound = true;						}					}				} while ((aHuiControl != nil) && ( helpFound == false));								if ( !helpFound)				{					aHuiControl = nil;					layer = currentPanel;					x = 0;					y = 0;					do					{						aHuiControl = HUI_GenericControl_GetNext( panelMaster, &layer,							&x, &y, aHuiControl);												if ( layer != currentPanel) aHuiControl = nil;												if ( aHuiControl != nil)						{							if (( aHuiControl->control != nil) &&								( aHuiControl->kind == hui_PlainControl) &&								( aHuiControl->helpStringResID >= 0))							{								alternateRect = (**(aHuiControl->control)).contrlRect;													LocalToGlobal( (Point *)&alternateRect.top);								LocalToGlobal( (Point *)&alternateRect.bottom);								if ( PtInRect( theEvent->where, &alternateRect))									helpFound = true;							}						}					} while ((aHuiControl != nil) && ( helpFound == false));				}				if (helpFound)				{					short	stringIndex = aHuiControl->enabledOffIndex;										if ( stringIndex < 0) stringIndex = aHuiControl->enabledOnIndex;					if ( stringIndex < 0) stringIndex = aHuiControl->disabledIndex;										help.hmmHelpType = khmmString;					GetIndString( help.u.hmmString, aHuiControl->helpStringResID,						stringIndex);					err = HMShowBalloon( &help, theEvent->where, &alternateRect,						nil, 0, 0, kHMRegularWindow);				}			}			result = true;			break;					case updateEvt:				BeginUpdate ((WindowPtr)whichWindow);			SetPort( (WindowPtr)whichWindow);			CalcVis( (WindowPtr)whichWindow);			UpdateControls( (WindowPtr)whichWindow, whichWindow->visRgn);			EndUpdate ((WindowPtr)whichWindow);			result = true;			break;		case mouseDown:			whichPart = FindWindow (theEvent->where, &scratchWindow);			switch( whichPart)			{				case inGrow:					{						Rect	growRect;						long	newSize;						growRect = qd.screenBits.bounds;						growRect.top = growRect.left = 120;						newSize = GrowWindow((WindowPtr)whichWindow,							theEvent->where ,&growRect);						if (newSize != 0)						{							SizeWindow( (WindowPtr)whichWindow, newSize & 0xffff,								(((newSize) >> 16) & 0xFFFF), true );							EraseRect(&whichWindow->portRect);							InvalRect( &whichWindow->portRect);//							aControl = GetWindowControlFromRefCon( whichWindow, 1);							aControl = HUI_Control_Get( master, 0, 0, 2, 1);							if ( aControl != nil)							{								EraseRect( &(**aControl).contrlRect);								InvalRect( &(**aControl).contrlRect);								growRect.left = whichWindow->portRect.right - 8 -									kGrowBoxSize - ((**aControl).contrlRect.right -										(**aControl).contrlRect.left);								growRect.right = growRect.left + ((**aControl).contrlRect.right -										(**aControl).contrlRect.left);								growRect.top = whichWindow->portRect.bottom - 8 -									((**aControl).contrlRect.bottom - (**aControl).contrlRect.top);								growRect.bottom = growRect.top + ((**aControl).contrlRect.bottom -									(**aControl).contrlRect.top);								(**aControl).contrlRect = growRect;								InvalRect( &growRect);							}//							aControl = GetWindowControlFromRefCon( whichWindow, 88);							aControl = HUI_Control_Get( master, 0, 0, 0, 88);							if ( aControl != nil)							{								EraseRect( &(**aControl).contrlRect);								InvalRect( &(**aControl).contrlRect);								(**aControl).contrlRect.right = whichWindow->portRect.right-8;								(**aControl).contrlRect.bottom = growRect.top - 16;								if (GetListBoxListHandle( aControl, &list) == noErr)								{									if ( list != nil)									{										Point		cellSize;																				cellSize.h = (**aControl).contrlRect.right -											(**aControl).contrlRect.left;										cellSize.v = (*list)->cellSize.v;										LCellSize( cellSize, list);									}								}								InvalRect( &(**aControl).contrlRect);							}						}					}					result = true;					break;								case inContent:					where = theEvent->where;					scratchWindow = FrontWindow();					if ( whichWindow != (CWindowPtr)scratchWindow)					{						goto ProcessEvent_Return;					}					SetPort( (WindowPtr)whichWindow);					GlobalToLocal( &where);					whichPart = FindControl( where, (WindowPtr)whichWindow,						&aControl);					oldValue = GetControlValue( aControl);					err = GetKeyboardFocus( (WindowPtr)whichWindow, &oldControl);					if (( err == noErr) && ( oldControl != aControl))					{						SetKeyboardFocus( (WindowPtr)whichWindow, aControl, whichPart);					}					if ( whichPart != 0)					{						huiPlainControlType	*hui = (huiPlainControlType	*)(**aControl).contrlRfCon;						whichPart = HandleControlClick ( aControl, where,							theEvent->modifiers, nil);							switch( hui->generic.id)						{							case 1:	// ok//							if ( GetDispatchWindowAdditionalData( dispatchID) != nil)//							{//								((void(*)(genericListWindowHeaderType *))GetDispatchWindowAdditionalData( dispatchID))( header);//							}								break;														case 2:	// list box								break;														case 82: // list/*								if (GetListBoxListHandle( aControl, &list) == noErr)								{									if ( list != nil)									{																				LClick( where, theEvent->modifiers, list);									}								}*/								break;														case 90: // add buttons//								err = -1;								err = NS_SelectFileObject( &gHFSFlavor.fileSpec);								if ( err == noErr)								{									GetIconSuiteFromFSSpec( &gHFSFlavor.fileSpec,										&gIconSuite);									if ( gHFSFlavor.fileSpec.name[0] == 0)									{										FInfo	finderInfo;										Str255	dirName;										//										pstrcpy( dirName, "\pIconBuilder v2.0");//										err = HGetFInfo( gHFSFlavor.fileSpec.vRefNum, gHFSFlavor.fileSpec.parID,//											dirName, &finderInfo);										err = GetDirNameFromFSSpec(											&gHFSFlavor.fileSpec,											dirName);										if ( err != noErr)										{											NumToString( err, dirName);										}										AddLaunchItem( gIconSuite, dirName);																			} else									{										AddLaunchItem( gIconSuite,											gHFSFlavor.fileSpec.name);									}									gDragProcessed = true;													gIconSuite = nil;								}								break;						}					} else // not in control					{						where = theEvent->where;						GlobalToLocal( &where);					}			}			break;					case keyDown:		case autoKey:			whichChar = theEvent->message & charCodeMask;			if ((whichChar=='\r' || whichChar==0x3))			{				// ok				long			soon = TickCount()+5;				//				aControl = GetWindowControlFromRefCon( whichWindow, 1);				aControl = HUI_Control_Get( master, 0, 0, 2, 1);				if ( aControl != nil)				{					HiliteControl( aControl, 1);					while ( TickCount() < soon){ /* do nothing */}					HiliteControl( aControl, 0);/*					if ( GetDispatchWindowAdditionalData( dispatchID) != nil)					{												aControl = GetWindowControlFromRefCon( whichWindow, kListControlRefCon);						if ( aControl != nil)						{							if (GetListBoxListHandle( aControl, &list) == noErr)							{								if ( list != nil)								{									Str255				cellContents;									Point				cell;									long				listLength = (*list)->dataBounds.bottom;									short				dataLen = 254;																		cell.v = 0;									cell.h = 0;									while ( cell.v < listLength)									{										if ( LGetSelect( true, &cell, list))										{											LGetCell( cellContents + 1, &dataLen, cell, list);											cellContents[0] = dataLen;											cellContents[kMarkLength] = cellContents[0] - kMarkLength;											HUnlock( data);											header->editProcPtr( &cellContents[kMarkLength],												header->userData);											HLock( data);										}										if ( !(LNextCell( false, true, &cell, list)))											cell.v = listLength;									}								}							}						}					}*/					return true;				}			} else if ((whichChar==0x1b) || ((whichChar=='.') && (theEvent->modifiers & cmdKey)))			{				// cancel				long			soon = TickCount()+5;				//				aControl = GetWindowControlFromRefCon( whichWindow, 2);				aControl = HUI_Control_Get( master, 0, 0, 2, 2);				if ( aControl != nil)				{					HiliteControl( aControl, 1);					while ( TickCount() < soon){ /* do nothing */}					HiliteControl( aControl, 0);										CloseDispatchWindow( dispatchID);					return true;				}			} else if ( whichChar == '\t')			{				if ( theEvent->modifiers & shiftKey)					ReverseKeyboardFocus( (WindowPtr)whichWindow);				else					AdvanceKeyboardFocus( (WindowPtr)whichWindow);				result = true;				break;			}						err = GetKeyboardFocus( (WindowPtr)whichWindow, &aControl);			if (( err == noErr) && ( aControl != nil))			{				whichPart = HandleControlKey( aControl,					(theEvent->message & keyCodeMask)>>16,					theEvent->message & charCodeMask, theEvent->modifiers);				{					Point		cell;					//					aControl = GetWindowControlFromRefCon( whichWindow, 88);					huiPlainControlType	*hui = (huiPlainControlType	*)(**aControl).contrlRfCon;					switch( hui->id)					{					}					aControl = HUI_Control_Get( master, 0, 0, 0, 88);					GetListBoxListHandle( aControl, &list);					cell.v = 0;					cell.h = 0;										if ( LGetSelect( true, &cell, list))					{						HUI_Master_HideLayer( panelMaster, currentPanel);						currentPanel++;						if ( currentPanel >= panelMaster->layerNum) currentPanel = 0;						HUI_Master_ShowLayer( panelMaster, currentPanel);					}									}			}			break;	}		ProcessEvent_Return:	SetPort( oldPort);//	HSetState( data, dataState);	return( result);	}#pragma mark ¥¥PUBLIC FUNCTIONS¥¥/******************************************\|**| public functions\******************************************/void NewTestWindow( void){	Rect				bounds;	CWindowPtr			newWindow;	long				windowID, j;	unsigned char		title[] = "\pHewey Test Window";	ControlHandle		rootControl, aControl;	ListHandle			list;	huiPlainControlParamType	buttonParam, textParam, groupParam;	huiCellParamType			cellParam;	huiMasterControlParamType	masterParam;	OSStatus					err;		// create the new window	SetRect( &bounds, 64, 64, 512, 256);	newWindow = NewDispatchWindow( &bounds, title, false,		kWindowDocumentProc, (WindowPtr)-1, true,		HandleEvent, nil,		&windowID);	SetThemeWindowBackground( (WindowPtr)newWindow,		kThemeActiveDialogBackgroundBrush, true);	SetWindowForDragging( (WindowPtr)newWindow);		SetPort( (WindowPtr)newWindow);//	ShowWindow( (WindowPtr)newWindow);	CreateRootControl( (WindowPtr)newWindow, &rootControl);	masterParam.control = &buttonParam;	masterParam.control->layer = 0;	masterParam.control->id = 0;	masterParam.control->flags = huiControlFlag_none;	SetRect( &masterParam.control->minMaxBounds, 0, 0, kHUI_Pixel_Max, kHUI_Pixel_Max);	masterParam.window = newWindow;	masterParam.rowNum = 3;//6;	masterParam.colNum = 2;	masterParam.layerNum = 1;	SetRect( &masterParam.inSpace, 6, 0, 6, 0);	SetRect( &masterParam.outSpace, 6, 2, 6, 2);	SetRect( &masterParam.controlSpace, 6, 6, 6, 6);	SetRect( &masterParam.minMaxBounds, 0, 0, kHUI_Pixel_Max, kHUI_Pixel_Max);	masterParam.baseLine = kControlSize;	master = HUI_MasterControl_New( nil, 0, 0, 0, &masterParam);		if ( master == nil) DebugStr("\p no master ");	master->tab[0][0].h = 112;	master->tab[0][0].hAlign = hui_halign_right;	HUI_Master_ShowLayer( master, 0);	masterParam.rowNum = 4;	masterParam.colNum = 1;	masterParam.layerNum = 6;	masterParam.control->id = 999;	SetRect( &masterParam.inSpace, 4, 8, 4, 10);	panelMaster = HUI_MasterControl_New( master, 0, 1, 0, &masterParam);	if ( master == nil) DebugStr("\p no panel master ");	panelMaster->tab[0][0].h = 112;	panelMaster->tab[0][0].hAlign = hui_halign_right;	panelMaster->tab[0][1].h = 112;	panelMaster->tab[0][1].hAlign = hui_halign_left;	panelMaster->tab[1][0].h = 60;	panelMaster->tab[1][0].hAlign = hui_halign_left;		groupParam.master = panelMaster;	groupParam.visible = true;	groupParam.enabled = true;	groupParam.layer = 0;	groupParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;	groupParam.fontStyle.font = kControlFont;	groupParam.fontStyle.size = kControlSize;	groupParam.fontStyle.style = kGroupStyle;	groupParam.helpStringResID = -1;	groupParam.id = 101;	groupParam.cellx = 0;	groupParam.celly = 0;	GetIndString( groupParam.label, kLabelResID, 1); // Session	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 102;	groupParam.celly = 1;	GetIndString( groupParam.label, kLabelResID, 2); // Monthly	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 103;	groupParam.celly = 2;	GetIndString( groupParam.label, kLabelResID, 3); // Weekly	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 104;	groupParam.celly = 3;	GetIndString( groupParam.label, kLabelResID, 4); //Daily	HUI_Group_New_LiteralP( &groupParam);	groupParam.layer = 1;	groupParam.id = 105;	groupParam.celly = 0;	GetIndString( groupParam.label, kLabelResID, 15); //Default & Alt Timers	HUI_Group_New_LiteralP( &groupParam);	groupParam.id = 106;	groupParam.celly = 2;	GetIndString( groupParam.label, kLabelResID, 16); //Automatic Options	HUI_Group_New_LiteralP( &groupParam);	groupParam.layer = 2;	groupParam.id = 107;	groupParam.celly = 0;	GetIndString( groupParam.label, kLabelResID, 27); // digit color & size	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 108;	groupParam.celly = 2;	GetIndString( groupParam.label, kLabelResID, 28); // buttons & display	HUI_Group_New_LiteralP( &groupParam);		groupParam.layer = 3;	groupParam.id = 109;	groupParam.celly = 0;	GetIndString( groupParam.label, kLabelResID, 38); // warning	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 110;	groupParam.celly = 2;	GetIndString( groupParam.label, kLabelResID, 39); // time limit	HUI_Group_New_LiteralP( &groupParam);		groupParam.id = 111;	groupParam.celly = 3;	GetIndString( groupParam.label, kLabelResID, 40); // connecting	HUI_Group_New_LiteralP( &groupParam);	groupParam.layer = 4;	groupParam.id = 112;	groupParam.celly = 0;	GetIndString( groupParam.label, kLabelResID, 49); // ot/ppp options	HUI_Group_New_LiteralP( &groupParam);		groupParam.layer = 5;	groupParam.id = 112;	groupParam.celly = 1;	GetIndString( groupParam.label, kLabelResID, 63); // auto items	HUI_Group_New_LiteralP( &groupParam);	groupParam.id = 112;	groupParam.celly = 3;	GetIndString( groupParam.label, kLabelResID, 64); // auto item options	HUI_Group_New_LiteralP( &groupParam);	cellParam.master = master;	cellParam.baseLine = -1;	cellParam.hAlign = hui_halign_left;	cellParam.vAlign = hui_valign_top;	cellParam.flags = huiControlFlag_none;	SetRect( &cellParam.minMaxBounds, 0, 0, kHUI_Pixel_Max, kHUI_Pixel_Max);	SetRect( &cellParam.outSpace, -1, -1, -1, -1);	SetRect( &cellParam.inSpace, -1, -1, -1, -1);	// list	cellParam.minMaxBounds.right = 148;	cellParam.colSpan = 1;	cellParam.rowSpan = 1;//4;	SetRect( &cellParam.outSpace, 12, 10, 4, 0);	SetRect( &cellParam.inSpace, 2, 2, 2, 2);	HUI_Cell_Set( 0, 0, 0, &cellParam);	// separator	cellParam.minMaxBounds.right = kHUI_Pixel_Max;	cellParam.colSpan = 2;	cellParam.rowSpan = 1;	cellParam.hAlign = hui_halign_center;	SetRect( &cellParam.outSpace, 12, -1, 12, -1);	SetRect( &cellParam.inSpace, 0, -1, 0, -1);	HUI_Cell_Set( 0, 0, 1, &cellParam);		// cancel / ok	cellParam.hAlign = hui_halign_right;	cellParam.baseLine = kLargeControlSize;	SetRect( &cellParam.outSpace, 0, 0, 0, 0);	SetRect( &cellParam.inSpace, 0, 8, 12, 12);	HUI_Cell_Set( 0, 0, 2, &cellParam);		cellParam.hAlign = hui_halign_left;	cellParam.colSpan = 1;	cellParam.rowSpan = 1;	SetRect( &cellParam.outSpace, 0, 0, 0, 0);	SetRect( &cellParam.inSpace, 0, 0, 0, 0);	cellParam.vAlign = hui_valign_top;	HUI_Cell_Set( 0, 1, 0, &cellParam);		// session	cellParam.master = panelMaster;	cellParam.baseLine = -1;	cellParam.colSpan = 1;	cellParam.rowSpan = 1;	cellParam.hAlign = hui_halign_center;	cellParam.vAlign = hui_valign_center;	cellParam.flags = huiControlFlag_none;	SetRect( &cellParam.minMaxBounds, 0, 0, kHUI_Pixel_Max, kHUI_Pixel_Max);	SetRect( &cellParam.outSpace, -1, 12, 12, -1);	SetRect( &cellParam.inSpace, -1, -1, -1, -1);	HUI_Cell_Set( 0, 0, 0, &cellParam);	cellParam.rowSpan = 2;	HUI_Cell_Set( 3, 0, 0, &cellParam);	cellParam.rowSpan = 1;	SetRect( &cellParam.outSpace, -1, -1, 12, -1);	HUI_Cell_Set( 0, 0, 1, &cellParam);	HUI_Cell_Set( 0, 0, 2, &cellParam);	HUI_Cell_Set( 3, 0, 2, &cellParam);	SetRect( &cellParam.outSpace, -1, -1, 12, 0);	HUI_Cell_Set( 0, 0, 3, &cellParam);	HUI_Cell_Set( 3, 0, 3, &cellParam);	// default & alt timers	cellParam.colSpan = 1;	cellParam.rowSpan = 2;	cellParam.baseLine = kControlSize;	cellParam.hAlign = hui_halign_center;	cellParam.vAlign = hui_valign_center;	SetRect( &cellParam.outSpace, -1, 12, 12, -1);	SetRect( &cellParam.inSpace, -1, 6, -1, -1);//	SetRect( &cellParam.outSpace, 12, 12, 12, 12);//	SetRect( &cellParam.inSpace, 12, 12, 12, 12);	HUI_Cell_Set( 1, 0, 0, &cellParam);	HUI_Cell_Set( 2, 0, 0, &cellParam);		// auto options	SetRect( &cellParam.outSpace, -1, -1, 12, 0);	cellParam.rowSpan = 2;	HUI_Cell_Set( 1, 0, 2, &cellParam);	HUI_Cell_Set( 2, 0, 2, &cellParam);		// layer 4, ot/ppp options	cellParam.rowSpan = 4;	SetRect( &cellParam.outSpace, -1, 12, 12, 0);	HUI_Cell_Set( 4, 0, 0, &cellParam);		// layer 5, auto launching options	cellParam.master = panelMaster;	cellParam.baseLine = -1;	cellParam.colSpan = 1;	cellParam.rowSpan = 1;	cellParam.hAlign = hui_halign_center;	cellParam.vAlign = hui_valign_center;	cellParam.flags = huiControlFlag_none;	SetRect( &cellParam.minMaxBounds, 0, 0, kHUI_Pixel_Max, kHUI_Pixel_Max);//	SetRect( &cellParam.outSpace, -1, 12, 12, -1);	SetRect( &cellParam.outSpace, -1, 2, 12, 0);	SetRect( &cellParam.inSpace, -1, -1, -1, -1);	HUI_Cell_Set( 5, 0, 0, &cellParam);	cellParam.rowSpan = 2;	SetRect( &cellParam.outSpace, -1, -1, 12, -1);	SetRect( &cellParam.inSpace, 12, -1, 12, -1);	HUI_Cell_Set( 5, 0, 1, &cellParam);	SetRect( &cellParam.inSpace, -1, -1, -1, -1);	cellParam.hAlign = hui_halign_right;	cellParam.rowSpan = 1;//	HUI_Cell_Set( 5, 0, 2, &cellParam);	cellParam.hAlign = hui_halign_center;	SetRect( &cellParam.outSpace, -1, -1, 12, 0);	HUI_Cell_Set( 5, 0, 3, &cellParam);	buttonParam.master = panelMaster;	buttonParam.visible = true;	buttonParam.enabled = true;	buttonParam.layer = 0;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.minMaxBounds.left = 0;	buttonParam.minMaxBounds.top = 0;	buttonParam.minMaxBounds.right = kHUI_Pixel_Max;	buttonParam.minMaxBounds.bottom = kHUI_Pixel_Max;	buttonParam.space.left = 4;	buttonParam.space.top = 8;	buttonParam.space.bottom = 4;	buttonParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;// | kControlUseJustMask;	buttonParam.fontStyle.font = kControlFont;	buttonParam.fontStyle.size = kControlSize;	buttonParam.fontStyle.style = 0;	buttonParam.fontStyle.just = -1;	buttonParam.id = 3;	buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.flags = huiControlFlag_none;	buttonParam.space.left = 4;	buttonParam.space.top = 8;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 0;	GetIndString( buttonParam.label, kLabelResID, 5); // Time limit:;	buttonParam.helpStringResID = 5504;	buttonParam.enabledOnIndex = 28;	buttonParam.enabledOffIndex = 27;	buttonParam.disabledIndex = -1;	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	textParam.master = panelMaster;	textParam.visible = true;	textParam.enabled = true;	textParam.layer = 0;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.minMaxBounds.left = 0;	textParam.minMaxBounds.top = 0;	textParam.minMaxBounds.right = kHUI_Pixel_Max;	textParam.minMaxBounds.bottom = kHUI_Pixel_Max;	textParam.space.left = 8;	textParam.space.top = 10;	textParam.space.bottom = 4;	textParam.flags = huiControlFlag_none;	textParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;// | kControlUseJustMask;	textParam.fontStyle.font = kControlFont;	textParam.fontStyle.size = kControlSize;	textParam.fontStyle.style = 0;	textParam.fontStyle.just = -1;	// session	textParam.cellx = 0;	textParam.celly = 0;	textParam.id = 3;	GetIndString( textParam.label, kLabelResID, 9); // 000	textParam.helpStringResID = 5504;	textParam.enabledOnIndex = 29;	textParam.enabledOffIndex = -1;	textParam.disabledIndex = -1;	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 4;	textParam.flags = huiControlFlag_none;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 10); // h:	textParam.helpStringResID = -1;	HUI_StaticText_New_LiteralP( &textParam);		textParam.id = 5;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	textParam.helpStringResID = 5504;	textParam.enabledOnIndex = 30;	textParam.enabledOffIndex = -1;	textParam.disabledIndex = -1;	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 6;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 11); // m	textParam.helpStringResID = -1;	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.id = 7;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.left = 0;	GetIndString( buttonParam.label, kLabelResID, 6); // Disconnect	buttonParam.helpStringResID = 5504;	buttonParam.enabledOnIndex = 31;	buttonParam.enabledOffIndex = 33;	buttonParam.disabledIndex = 32;	HUI_CheckBox_New_LiteralP( &buttonParam);			buttonParam.helpStringResID = -1;	textParam.helpStringResID = -1;	// monthly	textParam.cellx = 0;	textParam.celly = 1;	buttonParam.cellx = 0;	buttonParam.celly = 1;	buttonParam.flags = huiControlFlag_none;	textParam.id = 44;//	textParam.minMaxBounds.left = 84;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 12); // Reset on day:	HUI_StaticText_New_LiteralP( &textParam);		textParam.minMaxBounds.left = 0;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.id = 45;	GetIndString( textParam.label, kLabelResID, 9); // 000	textParam.space.left = 8; 	HUI_EditText_New_LiteralP( &textParam);		buttonParam.id = 13;//	buttonParam.minMaxBounds.left = 84;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 0;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 5); // Time limit	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	textParam.id = 14;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 15;	textParam.flags = huiControlFlag_none;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 10); // h:	HUI_StaticText_New_LiteralP( &textParam);		textParam.id = 16;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 17;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 11); // m	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.id = 18;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.left = 0;	GetIndString( buttonParam.label, kLabelResID, 6); // Disconnect	HUI_CheckBox_New_LiteralP( &buttonParam);			// weekly	textParam.cellx = 0;	textParam.celly = 2;	buttonParam.cellx = 0;	buttonParam.celly = 2;	buttonParam.flags = huiControlFlag_none;	textParam.id = 50;//	textParam.minMaxBounds.left = 84;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 13); // Reset every:	HUI_StaticText_New_LiteralP( &textParam);		textParam.minMaxBounds.left = 0;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	buttonParam.id = 51;	buttonParam.special.res.resID = 208;//208	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_useTabMaxWidth;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 1;	HUI_ResourceControl_New( &buttonParam);		buttonParam.space.left = 4;	buttonParam.flags = huiControlFlag_none;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;		buttonParam.id = 19;	buttonParam.flags = huiControlFlag_newLine;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 0;	GetIndString( buttonParam.label, kLabelResID, 5); // Time limit	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	textParam.id = 20;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 21;	textParam.flags = huiControlFlag_none;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 10); // h:	HUI_StaticText_New_LiteralP( &textParam);		textParam.id = 22;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 23;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 11); // m	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.id = 24;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.left = 0;	GetIndString( buttonParam.label, kLabelResID, 6); // Disconnect	HUI_CheckBox_New_LiteralP( &buttonParam);			// daily	textParam.cellx = 0;	textParam.celly = 3;	buttonParam.cellx = 0;	buttonParam.celly = 3;	buttonParam.flags = huiControlFlag_none;	textParam.id = 50;//	textParam.minMaxBounds.left = 84;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 14); // Reset every:	HUI_StaticText_New_LiteralP( &textParam);		textParam.minMaxBounds.left = 0;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	buttonParam.id = 51;	buttonParam.special.res.resID = 207;//208	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_useTabMaxWidth;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 1;	HUI_ResourceControl_New( &buttonParam);		buttonParam.space.left = 4;	buttonParam.flags = huiControlFlag_none;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.id = 25;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 5); // Time limit	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 0;	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.flags = huiControlFlag_none;	textParam.id = 26;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 27;	textParam.space.left = 4;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 10); // h:	HUI_StaticText_New_LiteralP( &textParam);		textParam.id = 28;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 29;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 11); // m	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.id = 30;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.left = 0;	GetIndString( buttonParam.label, kLabelResID, 6); // Disconnect	HUI_CheckBox_New_LiteralP( &buttonParam);		// layer 1; automatic options		buttonParam.cellx = 0;	buttonParam.celly = 2;	buttonParam.layer = 1;	buttonParam.id = 31;	buttonParam.flags = huiControlFlag_none;	GetIndString( buttonParam.label, kLabelResID, 17); // open ppp on launch	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 32;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 18); // hide until launch	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 322;	buttonParam.flags = huiControlFlag_newLine;//	GetIndString( buttonParam.label, kLabelResID, 18); // hide until launch	pstrcpy( buttonParam.label, "\pQuit when connection closes");	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 33;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 19); // save every	HUI_CheckBox_New_LiteralP( &buttonParam);		textParam.cellx = 0;	textParam.celly = 2;	textParam.layer = 1;	textParam.id = 34;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 35;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 20); // m	HUI_StaticText_New_LiteralP( &textParam);			buttonParam.id = 36;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 21); // show addtnl info	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 41;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 22); // disconnect manual quit	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 42;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 23); // warn 1st	buttonParam.whichTabSet = 1;	buttonParam.whichTab = 0;	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.id = 41;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 24); // disconnect manual quit	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 42;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 23); // warn 1st	buttonParam.whichTabSet = 1;	buttonParam.whichTab = 0;	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	// layer 1; default/alt timers		textParam.celly = 0;	textParam.id = 37;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 25); // normally show	HUI_StaticText_New_LiteralP( &textParam);		textParam.whichTabSet = -1;	textParam.whichTab = -1;	buttonParam.celly = 0;	buttonParam.id = 38;	buttonParam.special.res.resID = 206;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_none;	HUI_ResourceControl_New( &buttonParam);		buttonParam.space.left = 4;		textParam.id = 39;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.flags = huiControlFlag_newLine;	GetIndString( textParam.label, kLabelResID, 26); // normally show	HUI_StaticText_New_LiteralP( &textParam);		textParam.whichTabSet = -1;	textParam.whichTab = -1;	buttonParam.id = 40;	buttonParam.special.res.resID = 209;	buttonParam.space.left = 8;	HUI_ResourceControl_New( &buttonParam);		buttonParam.space.left = 4;	// layer 2; digit color & size		textParam.cellx = 0;	textParam.celly = 0;	textParam.layer = 2;	textParam.id = 50;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 29); // digit color	HUI_StaticText_New_LiteralP( &textParam);		textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.layer = 2;	buttonParam.id = 51;	buttonParam.special.res.resID = 203;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_useTabMaxWidth;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 1;	HUI_ResourceControl_New( &buttonParam);		buttonParam.flags = huiControlFlag_none;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;		textParam.id = 52;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.flags = huiControlFlag_newLine;	GetIndString( textParam.label, kLabelResID, 30); // digit width	HUI_StaticText_New_LiteralP( &textParam);		textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.id = 53;	buttonParam.special.res.resID = 204;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_useTabMaxWidth;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 1;	HUI_ResourceControl_New( &buttonParam);		buttonParam.flags = huiControlFlag_none;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;		textParam.id = 54;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	textParam.flags = huiControlFlag_newLine;	GetIndString( textParam.label, kLabelResID, 31); // digit height	HUI_StaticText_New_LiteralP( &textParam);		textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.id = 55;	buttonParam.special.res.resID = 205;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_useTabMaxWidth;	buttonParam.whichTabSet = 0;	buttonParam.whichTab = 1;	HUI_ResourceControl_New( &buttonParam);		buttonParam.flags = huiControlFlag_none;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;		buttonParam.celly = 2;	buttonParam.id = 56;	buttonParam.flags = huiControlFlag_none;	GetIndString( buttonParam.label, kLabelResID, 32); // show connect	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 57;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 33); // show quit	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 58;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 34); // show throughput	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 59;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 35); // count down	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 60;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 36); // show seconds	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 61;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 37); // show 100+	HUI_CheckBox_New_LiteralP( &buttonParam);		// layer 3, warning		textParam.cellx = 0;	textParam.celly = 0;	textParam.layer = 3;	textParam.id = 62;	textParam.space.left = 4;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 41); // warn	HUI_StaticText_New_LiteralP( &textParam);	textParam.id = 63;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 64;	textParam.flags = huiControlFlag_none;	textParam.space.left = 4;	GetIndString( textParam.label, kLabelResID, 10); // h:	HUI_StaticText_New_LiteralP( &textParam);		textParam.id = 65;	textParam.space.left = 8;	GetIndString( textParam.label, kLabelResID, 9); // 000	HUI_EditText_New_LiteralP( &textParam);		textParam.id = 66;	textParam.space.left = 16;	GetIndString( textParam.label, kLabelResID, 42); // m before limit is up	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.layer = 3;	buttonParam.id = 67;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 43); // show alert for warning	HUI_CheckBox_New_LiteralP( &buttonParam);		textParam.id = 68;	textParam.flags = huiControlFlag_newLine;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	GetIndString( textParam.label, kLabelResID, 44); // warning sound	HUI_StaticText_New_LiteralP( &textParam);	textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.id = 69;	buttonParam.special.res.resID = 210;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.right = 128;	HUI_ResourceControl_New( &buttonParam);		buttonParam.minMaxBounds.right = kHUI_Pixel_Max;		// layer 3; time limit	buttonParam.celly = 2;	buttonParam.id = 70;	buttonParam.flags = huiControlFlag_none;	GetIndString( buttonParam.label, kLabelResID, 45); // show alert for time up	HUI_CheckBox_New_LiteralP( &buttonParam);		textParam.celly = 2;	textParam.id = 71;	textParam.flags = huiControlFlag_newLine;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	GetIndString( textParam.label, kLabelResID, 46); // time limit up sound	HUI_StaticText_New_LiteralP( &textParam);	textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.id = 72;	buttonParam.special.res.resID = 211;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.right = 128;	HUI_ResourceControl_New( &buttonParam);		buttonParam.minMaxBounds.right = kHUI_Pixel_Max;		// layer 3; connecting	textParam.celly = 3;	textParam.id = 73;	textParam.flags = huiControlFlag_none;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	GetIndString( textParam.label, kLabelResID, 47); // connect sound	HUI_StaticText_New_LiteralP( &textParam);	textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.celly = 3;	buttonParam.id = 74;	buttonParam.special.res.resID = 201;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.right = 128;	HUI_ResourceControl_New( &buttonParam);		buttonParam.minMaxBounds.right = kHUI_Pixel_Max;		textParam.celly = 3;	textParam.id = 75;	textParam.flags = huiControlFlag_newLine;	textParam.space.left = 4;	textParam.whichTabSet = 0;	textParam.whichTab = 0;	GetIndString( textParam.label, kLabelResID, 48); // disconnect sound	HUI_StaticText_New_LiteralP( &textParam);	textParam.whichTabSet = -1;	textParam.whichTab = -1;		buttonParam.id = 76;	buttonParam.special.res.resID = 202;	buttonParam.space.left = 8;	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.right = 128;	HUI_ResourceControl_New( &buttonParam);		buttonParam.minMaxBounds.right = kHUI_Pixel_Max;		// layer 4; ot/ppp options	textParam.cellx = 0;	textParam.celly = 0;	textParam.layer = 4;	textParam.id = 77;	textParam.space.left = 4;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 50); // explain	HUI_StaticText_New_LiteralP( &textParam);	buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.layer = 4;	buttonParam.id = 78;	buttonParam.flags = huiControlFlag_newLine;//	buttonParam.whichTabSet = 1;//	buttonParam.whichTab = 0;	GetIndString( buttonParam.label, kLabelResID, 51); // don't display dialogs	HUI_CheckBox_New_LiteralP( &buttonParam);			textParam.id = 79;//	textParam.whichTabSet = 1;//	textParam.whichTab = 0;	textParam.flags = huiControlFlag_newLine;	textParam.space.top = 25;	textParam.fontStyle.style = italic;	textParam.fontStyle.size = 9;	textParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;	GetIndString( textParam.label, kLabelResID, 52); // special note	HUI_StaticText_New_LiteralP( &textParam);	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;	textParam.fontStyle.font = kControlFont;	textParam.fontStyle.size = kControlSize;	textParam.fontStyle.style = 0;	textParam.space.top = 10;	buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.layer = 4;	buttonParam.id = 80;	buttonParam.flags = huiControlFlag_newLine;//	buttonParam.whichTabSet = 1;//	buttonParam.whichTab = 0;	GetIndString( buttonParam.label, kLabelResID, 53); // don't guess speed	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	// layer 5; auto launch	textParam.cellx = 0;	textParam.celly = 0;	textParam.layer = 5;	textParam.id = 81;	textParam.space.left = 4;	textParam.whichTabSet = -1;	textParam.whichTab = -1;	textParam.flags = huiControlFlag_none;	GetIndString( textParam.label, kLabelResID, 54); // explain	HUI_StaticText_New_LiteralP( &textParam);		buttonParam.space.bottom = 2;	buttonParam.cellx = 0;	buttonParam.celly = 1;	buttonParam.layer = 5;	buttonParam.id = 82;	buttonParam.minMaxBounds.top = 0;	buttonParam.flags = (huiControlFlagType)((int)huiControlFlag_useCellH +		(int)huiControlFlag_autoSizeListBoxCell);	buttonParam.space.top = 10;//	buttonParam.flags = (huiControlFlagType)((int)huiControlFlag_useCellH |//		(int)huiControlFlag_useCellV);	buttonParam.special.res.resID = 130;	HUI_ResourceControl_New( &buttonParam);	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.top = 0;	buttonParam.space.top = 8;		// fill in the cells	aControl = HUI_ControlHandle_Get( panelMaster, 5, 0, 1, 82);	if ( aControl == nil) DebugStr("\pno control handle from hui list control");	SetPort( (WindowPtr)newWindow);	FillFinderLikeLDEF( aControl);		buttonParam.celly = 3;	buttonParam.id = 83;	buttonParam.space.top = 2;	GetIndString( buttonParam.label, kLabelResID, 57); // include in launch menu	HUI_CheckBox_New_LiteralP( &buttonParam);			buttonParam.id = 84;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 58); // auto launch	HUI_CheckBox_New_LiteralP( &buttonParam);		//	buttonParam.id = 85;//	buttonParam.whichTabSet = 1;//	buttonParam.whichTab = 0;//	GetIndString( buttonParam.label, kLabelResID, 59); // on connect//	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.id = 86;	GetIndString( buttonParam.label, kLabelResID, 60); // on disconnect	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.id = 87;	GetIndString( buttonParam.label, kLabelResID, 61); // auto quit on disconnect	HUI_CheckBox_New_LiteralP( &buttonParam);			buttonParam.id = 88;	GetIndString( buttonParam.label, kLabelResID, 62); // don't connect while running	HUI_CheckBox_New_LiteralP( &buttonParam);		buttonParam.flags = huiControlFlag_none;	buttonParam.celly = 1;	buttonParam.id = 89;	buttonParam.minMaxBounds.left = 100;	buttonParam.flags = huiControlFlag_newLine;	GetIndString( buttonParam.label, kLabelResID, 56); // remove...	HUI_PushButton_New_LiteralP( &buttonParam);	buttonParam.flags = huiControlFlag_none;		buttonParam.id = 90;	GetIndString( buttonParam.label, kLabelResID, 55); // add...	HUI_PushButton_New_LiteralP( &buttonParam);	buttonParam.minMaxBounds.left = 0;	buttonParam.space.top = 8;	buttonParam.space.bottom = 4;	// main controls	buttonParam.master = master;	buttonParam.layer = 0;	buttonParam.whichTabSet = -1;	buttonParam.whichTab = -1;	buttonParam.minMaxBounds.left = 0;	buttonParam.minMaxBounds.top = 0;	buttonParam.minMaxBounds.right = kHUI_Pixel_Max;	buttonParam.minMaxBounds.bottom = kHUI_Pixel_Max;	buttonParam.space.left = 4;	buttonParam.space.top = 4;	buttonParam.space.bottom = 4;	buttonParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask;//	 | kControlUseFaceMask;	buttonParam.fontStyle.font = kControlFont;	buttonParam.fontStyle.size = kControlSize;	buttonParam.fontStyle.style = kGroupStyle;		buttonParam.special.res.resID = 128;	buttonParam.id = 88;	buttonParam.cellx = 0;	buttonParam.celly = 0;	buttonParam.flags = (huiControlFlagType)((int)huiControlFlag_useCellH |		(int)huiControlFlag_useCellV);	buttonParam.space.left = 0;	buttonParam.space.top = 0;	buttonParam.minMaxBounds.left = 132;	HUI_ResourceControl_New( &buttonParam);	buttonParam.flags = huiControlFlag_none;	buttonParam.minMaxBounds.left = 0;		// fill in the cells	aControl = HUI_ControlHandle_Get( master, 0, 0, 0, 88);	if ( aControl == nil) DebugStr("\pno control handle from hui list control");	err = GetListBoxListHandle( aControl, &list);	if ( err == noErr )	{		Cell		cell;		SInt16		i;		Str255		string;				cell.h = 0;				for ( i = 1;  true; i++ )		{			GetIndString( string, 131, i);			if ( string[0] == 0 ) break;			LAddRow( 1, (**list).dataBounds.bottom, list );			cell.v = (**list).dataBounds.bottom - 1;			LSetCell( (Ptr)(string + 1), string[0], cell, list );		}	}		buttonParam.id = 89;	buttonParam.cellx = 0;	buttonParam.celly = 1;//4;	buttonParam.minMaxBounds.right = 100;//480;	buttonParam.minMaxBounds.bottom = 8;	buttonParam.space.top = 0;	buttonParam.space.left = 0;	buttonParam.flags = huiControlFlag_useCellH;	HUI_SeparatorLine_New( &buttonParam);		buttonParam.minMaxBounds.right = kHUI_Pixel_Max;	buttonParam.minMaxBounds.bottom = kHUI_Pixel_Max;	buttonParam.flags = huiControlFlag_none;	buttonParam.id = 2;	buttonParam.cellx = 0;	buttonParam.celly = 2;//5;	buttonParam.fontStyle.style = kGroupStyle;	buttonParam.space.left = 24;	buttonParam.space.top = 0;	buttonParam.minMaxBounds.left = 100;	buttonParam.fontStyle.flags = kControlUseFontMask | kControlUseSizeMask |		kControlUseFaceMask;	buttonParam.fontStyle.font = 0;	buttonParam.fontStyle.size = 12;	buttonParam.fontStyle.style = 0;	GetIndString( buttonParam.label, kLabelResID, 7); // Cancel	HUI_PushButton_New_LiteralP( &buttonParam);		buttonParam.id = 1;	GetIndString( buttonParam.label, kLabelResID, 8); // OK	buttonParam.space.left = 0;	buttonParam.flags = (huiControlFlagType)((int)huiControlFlag_isDefault | (int)huiControlFlag_none);	HUI_PushButton_New_LiteralP( &buttonParam);		//	HUI_MasterControl_Layout( master);		ShowWindow( (WindowPtr)newWindow);	HUI_Master_Layout( master, (Point){0, 0}, (Point){0, 0});	for ( j = 0; j < master->layerNum; j++)	{//		HUI_Master_HideLayer(master, j);//		HUI_Master_ShowAllControls( master, j);	}//	HUI_Master_ShowLayer( master, 0);	for ( j = 0; j < panelMaster->layerNum; j++)	{//		HUI_Master_ShowAllControls( panelMaster, j, false);		HUI_Master_HideLayer(panelMaster, j);	}		HUI_Master_ShowLayer( panelMaster, currentPanel);}StringPtr rstring( StringPtr s, short resid, short strnum){	GetIndString( s, resid, strnum);	return s;}void FillFinderLikeLDEF( ControlHandle aControl){	OSStatus	err;	ListHandle	list;	long		i = 0, resNum = CountResources('alis');	AliasHandle	alias = nil;	short		theID;	ResType		theType;	Str255		theName;		err = GetListBoxListHandle( aControl, &list);	(*list)->selFlags = lUseSense;//	alisListData.inited = false;//	alisListData.control = aControl;//	alisListData.fontStyle.font = kControlFont;//	alisListData.fontStyle.size = kControlSize;//	alisListData.fontStyle.style = 0;//	(*list)->refCon = (long)&alisListData;	if ( err == noErr )	{		Cell		cell;//		Str255		string;				cell.h = 0;				while ( i < resNum)		{			alias = (AliasHandle)Get1IndResource('alis', i + 1);			if (( alias != nil) && ( i != 0))			{				finderLikeLDEFCellDataType	cellData;				EventRecord					theEvent;				//				SysBeep(20);//				WaitNextEvent (everyEvent, &theEvent, 3, nil);//				switch ( theEvent.what ) //				{//					case kHighLevelEvent :////						err = AEProcessAppleEvent (&theEvent);//						break;//				}				GetAliasInfo( alias, 0, cellData.name);				cellData.iconSuite = GetIconSuiteFromAlias( alias);//				GetIndString( string, 131, i+1);//				if ( string[0] == 0 ) break;//				GetResInfo( (Handle)alias, &theID, &theType, theName);								LAddRow( 1, (**list).dataBounds.bottom, list );				cell.v = (**list).dataBounds.bottom - 1;//				LSetCell( (Ptr)(&theID), sizeof(short), cell, list );				LSetCell( (Ptr)(&cellData), sizeof(finderLikeLDEFCellDataType), cell, list );				ReleaseResource( (Handle)alias);			}			i++;		}	}}void AddLaunchItem( Handle iconSuite, StringPtr name){	OSStatus 					err;	ListHandle					list;	Cell						cell;	ControlHandle				aControl;	finderLikeLDEFCellDataType	cellData;	aControl = HUI_ControlHandle_Get( panelMaster, 5, 0, 1, 82);	if ( aControl == nil) DebugStr("\pno control handle from hui list control");	err = GetListBoxListHandle( aControl, &list);	if (( err == noErr) && ( list != nil))	{		cell.h = 0;		LAddRow( 1, (**list).dataBounds.bottom, list );		cell.v = (**list).dataBounds.bottom - 1;		cellData.iconSuite = iconSuite;		pstrcpy( cellData.name, name);		LSetCell( (Ptr)(&cellData), sizeof(finderLikeLDEFCellDataType), cell, list );	}	InvalRect( &(*aControl)->contrlRect);}OSStatus GetDirNameFromFSSpec( FSSpecPtr dirSpec, StringPtr name){	CInfoPBRec	pb;	OSStatus	err;		if ( name == nil) return;		name[0] = 0;	pb.dirInfo.ioNamePtr = name;	pb.dirInfo.ioFDirIndex = -1;	pb.dirInfo.ioVRefNum = dirSpec->vRefNum;	pb.dirInfo.ioDrDirID = dirSpec->parID;	err = PBGetCatInfoSync( &pb);	return( err);}